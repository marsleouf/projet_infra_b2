function Menu() {
    let objet;
  const id = document.getElementById("menu");

    this.Push = () => {
        var xhttp1 = new XMLHttpRequest();
        xhttp1.open("POST", "/Dashbord/API/API.php", true);
        xhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp1.onload = function () {
          const resulHtml = xhttp1.responseText;
          //console.log(resulHtml);
          //obj1 = JSON.parse(objet);
          //console.log(objet);
        };
        xhttp1.send("obj=" + JSON.stringify(objet) + "&mode=2");
    };
    Get = () => {
        let xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/Dashbord/API/API.php?ME=3", true);
        xhttp.send();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 8 && this.status == 200) {
            console.log("Pas d'info");
          }
        };
        xhttp.onload = function () {
          const resulHtml = xhttp.responseText;
          console.log(JSON.parse(resulHtml),"eeeeeee");
          objet = JSON.parse(resulHtml);
        //   try {
        //     objet = JSON.parse(resulHtml);
        //     this.creeMenu(objet);
        //     //console.log(objet);
        //   } catch (err) {
        //     console.error("error", err);
        //   }
        };
        

    }
    const addList = (ev) => { 
        //console.log(ev.target.parentNode.id);
        
        if (ev.target.parentNode.id) {
            let id = document.getElementById(ev.target.parentNode.id);
            console.log(id)
            if (id.id != null) {
                const value = document.getElementById(`ul ${id.id}`);
                if (value.classList[2] === "mm-show") {
                    value.classList.remove("mm-show");
                } else if (value.classList[1] === "mm-collapse") {
                    value.classList.add("mm-show"); 
                }
            }
            
        }
       
    }
//   console.log(objet);
  const creeMenu = (data) => {
    //const id = document.getElementById("menu");setAttribute(name, value)
      let li;
      let idli;
      for (let index = 0; index < data.length; index++) { // bouble1
          const element = data[index];
          //console.log(element);
          if (element['type'] != undefined) {
            li = document.createElement(element['type']);
          }
          if (element['class'] != undefined) {
            li.className = element['class'];
          }
          idli =  `${index}`;
          li.id = idli;
          if (element['name']!= undefined) {
            li.innerText = element['name'];
          }
          if (element['obj'] != undefined) {
              for (const [key, value1] of Object.entries(element['obj'])) {
                  if (value1['type'] != undefined) {
                      var a = document.createElement(value1['type']);
                      if (value1['type'] == "ul") {
                        a.id = `ul ${index}`;
                      }
                      a.addEventListener("click", addList , false);
                      if (value1['href'] != undefined) {
                          a.href = value1['href'];
                      }
                      if (value1['class'] != undefined) {
                        a.className = value1['class'];
                      }
                      if (value1['atribu'] != undefined) {
                          for (const [key4, value4] of Object.entries(value1['atribu'])) {
                              a.setAttribute(key4, value4);
                          }
                      }
                      if (value1['obj'] != undefined) {
                          for (const [key2, value2] of Object.entries(value1['obj'])) {
                              if (value2['type'] != undefined) {
                                  var b = document.createElement(value2['type']);
                                  if (value2['class'] != undefined) {
                                    b.className = value2['class'];
                                  }
                                  if (value2['src'] != undefined) {
                                    b.src = value2['src']; 
                                  }
                                  if (value2['name'] != undefined) {
                                    b.innerText = value2['name']; 
                                  }
                                  console.log(value2);
                                  
                                  if (value2['obj'] != undefined) {
                                      for (const [key3, value3] of Object.entries(value2['obj'])) { 
                                          if (value3['type'] != undefined) {
                                              let c = document.createElement(value3['type']);
                                              if (value3['class']) {
                                                  c.className = value3['class'];
                                              }
                                                if (value3['name']) {
                                                    c.innerText = value3['name'];
                                                }
                                                if (value3['href']) {
                                                    c.href = value3['href'];
                                                }
                                                if (value3['src']) {
                                                    c.src = value3['src'];
                                                }
                                              //console.log(value3);
                                              b.appendChild(c);
                                          } 
                                          console.log(value3);
                                      }
                                  }
                              }
                              a.appendChild(b);
                          }
                      }
                      li.appendChild(a);
                      // console.log(key, value1)
                  }
              }
              
          }

          console.log(li);
          id.appendChild(li);
    }
    
  };
  let xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/Dashbord/API/API.php?ME=3", true);
        xhttp.send();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 8 && this.status == 200) {
            console.log("Pas d'info");
          }
        };
    xhttp.onload = function () {
        const resulHtml = xhttp.responseText;
        console.log(JSON.parse(resulHtml));
        objet = JSON.parse(resulHtml);
        creeMenu(objet);
    }
  //console.log(objet.length);
  // const li = document.createElement("li");
  // const a = document.createElement("a");
  // const span = document.createElement("span");
  // a.className = "side-nav-link";
  // a.href = "javascript:void(0);";
  // span.innerText = "TEXT";
  // li.className = "side-nav-item";

  // a.appendChild(span);
  // li.appendChild(a);
  // id.appendChild(li);
}
